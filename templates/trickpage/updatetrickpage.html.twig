{% extends 'base.html.twig' %}

{% block body %}
    <div class="container bg-light rounded">
        {{form_start(trickform)}}
            
            {# Include Hero & Featured Image #}
            {% include 'trickpage/trickTemplate/_header.html.twig'with {'edit': true }  %}
                
            <div class="content-trick mt-4">		
                {# --------------------Gallery links--------------------- #}
                <section id="gallery">
                    {# {% include 'trickpage/trickTemplate/_gallery.html.twig'with {'update': true }  %} #}
                    <div class="row  justify-content-center">

                        {#  On parcourt une liste en récupérant l'index.loop dans la liste du formView,
                            puis on affiche l'image correspondant à l'index dans la liste trick.images||videos #}

                        {# Images #}
                        {% for image in trickform.images %}
                            <div class="col-3">
                                {% set index = loop.index %}                        
                                {{ form_widget(image.name) }}
                                <img src="{{asset('images/'~trick.images[index-1].name)}}" class="card-img-top gallery-item" alt="Snowboard trick"/>
                            </div>
                        {% endfor %}
                        {# Videos #}
                        {% for video in trickform.videos %}
                            <div class="col-3">
                                {% set index = loop.index %}                        
                                {{ form_widget(video.name) }}
                                <iframe class="w-100 rounded ratio ratio-16x9 gallery-item" src="{{trick.videos[index-1].name}}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                        {% endfor %}                    
                    </div>
                </section>

                {# Modal pour afficher les images #}
                {{ include("trickpage/_modal.html.twig")}}

                {# On affiche le bouton media qui permet de load les media en responsive #}
                <section id="see-media">
                    <div class="button-load-more text-center mb-5">
                        <a href="" class="btn btn-sm rounded text-light bg-dark px-5 py-3" >See media</a>
                    </div>
                </section>
                {# --------------------------------  GALLERY UPDATE  ----------------------------------------- #}


                {# Section Contenu Trick && Button #}
                <section class="row mx-auto col-8 pb-5">
                    {# Description Field && trick group #}
                    {% include 'trickpage/trickTemplate/_content.html.twig' with {'page': 'update' } %}                
                </section>                 
            </div> 
        {{form_end(trickform)}}          
    </div>

{% endblock %}